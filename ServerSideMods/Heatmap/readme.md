# DayZ Heatmap Generator

Based on the index included with [HeatMap](https://steamcommunity.com/sharedfiles/filedetails/?id=2854246756).

A lightweight browser-based tool to generate interactive heatmaps from exported DayZ server/player data. Built with plain HTML, CSS, and JavaScript — no backend required.

Originally, a very basic `index.html` was created by Affenb3rt. This project expands and updates it, adding additional functionality, improvements and Antoria.

The mod included is based on Affenb3rt's version with updated functions from NullWorld.

**Note:** The mod should only be run server-side, not client-side.

The `index.html` also works with **NullWorld_Heatmap**.

---

## Features

- **Map support**
  - Built-in maps: Antoria, Enoch, Chernarus, Esseker (Antoria added by ElektroVodka)
  - Load custom map images

- **Heatmap rendering**
  - Player waypoints shown as a heatmap with configurable intensity
  - Deaths, storages, and zombies shown as overlay markers
  - Time slider to filter events chronologically

- **User Interface**
  - Toggle layers: Waypoints, Deaths, Storages, Zombies
  - Heatmap intensity slider
  - Dark/Light theme toggle
  - Select folder or drag-and-drop JSON data files

- **Export**
  - Merge current map and overlays into a PNG image

---

## Getting Started
### Installing HeatMap.pbo as a Server Mod

The JSON files used by the index.html are generated by the **HeatMap.pbo** server mod. Follow these steps to set it up:

1. **Download HeatMap.pbo**  
   Obtain the HeatMap.pbo mod (based on Affenb3rt and NullWorld updates) and place it in your server’s `@ServerSideMods/addons` folder.

2. **Add the server mod to your server startup**  
   Include the mod in your server launch parameters using the `-servermod=` argument. Example:  
```
-servermod=@ServerSideMods
```

3. **Start the server**  
   When the server initializes, the mod will automatically create a folder for heatmap data in the server profile:  
```
<server profile path>/Heatmap/
```

4. **Generate JSON files**  
   After each mission ends, the mod saves a JSON file in the Heatmap folder. Each file contains the current heatmap data, including:
- Player waypoints  
- Deaths  
- Storages  
- Zombies  

The filenames include the timestamp of the mission end, e.g.:  
```
2025_08_25_14_30_Heatmap.json
```

5. **Use the heatmap tool**  
- Drag and drop the JSON files or select the Heatmap folder using the tool’s interface.  
- The heatmap generator will read these files and render the interactive heatmap.

> **Note:** Only server-side generated JSON files are compatible. The mod must not be run client-side.

---

### Configuring Tracking Intervals

You can adjust how frequently player positions are recorded by the HeatMap.pbo mod using configuration parameters in your `serverDZ.cfg`:

- **heatmapTickTime** – interval in seconds for tracking players on foot  
- **heatmapTickTimeVehicle** – interval in seconds for tracking players in vehicles  

Example configuration:
```
heatmapTickTime = 120;
heatmapTickTimeVehicle = 30;
```

- Values are in seconds.  
- `heatmapTickTimeVehicle` allows a different interval when players are in vehicles.  
- Default values (if not set) are:
  - 120 seconds for players on foot  
  - 30 seconds for players in vehicles  

Adjust these values based on your server performance and desired tracking detail.

---

## Generate images from heatmap mod output

1. Download `index.html`.
2. Open it in a modern browser (Chrome, Edge, Firefox).
3. Drag and drop your exported DayZ JSON files from the Heatmap folder onto the page or use the **Select Folder** button.
4. Adjust layers, intensity, and the time filter.
5. Export the combined heatmap as an image.

---

## JSON File Structure

The tool expects JSON files containing some of the following fields:

- `m_WayPoints`
- `m_DeathPoints`
- `m_StoragePoints`
- `m_ZombiePoints`

Each dataset is optional and will only be loaded if present.

---

## Tech Stack

- HTML5 + Canvas
- CSS3 (light/dark theme)
- JavaScript
- [html2canvas](https://html2canvas.hertzen.com/) for export
- [FileSaver.js](https://github.com/eligrey/FileSaver.js/) for saving PNGs

---

## Development Notes

- All rendering is client-side; no server is required.
- Heatmap colors follow a blue → green → yellow → red gradient based on intensity.
- Deaths, storages, and zombies are displayed as markers, not blended heatmaps.
- To add more maps, extend the `mapImage` and `mapSize` dictionaries in the JavaScript file.

---

## License

MIT License — free to use and modify.